{% extends 'AdenaMailBundle::layout.html.twig' %}


{% block adenamail_body %}
    <div class="row">
        <div class="col-xs-12">
            {% include('AdenaMailBundle:Common/Button:create_link_button.html.twig') with {'label' : 'Add new Email', 'path' : path('adena_mail_email_add') } %}
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12">
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Subject</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for email in emails %}
                    <tr>
                        <td>{{ email.id }}</td>
                        <td><a href="{{ path('adena_mail_email_view', {'id': email.id}) }}">{{ email.subject }}</a></td>
                        <td>
                            <a href="{{ path('adena_mail_email_edit', {'id': email.id}) }}">
                                Edit
                            </a> |
                            <a href="{{ path('adena_mail_email_delete', {'id': email.id}) }}">
                                Delete
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12">
            <ul class="pagination">
                {% set route = 'adena_mail_email_list' %}
                {% set query = {} %}
                {% set pageCount = emails.nbPages %}
                {% set startPage = 4 %}
                {% set endPage = 5 %}
                {% set current = emails.page %}
                {% set pageParameterName = 'page' %}
                {% set previous = emails.page-1 %}
                {% set next = emails.page+1 %}

                {% if pageCount > 1 %}
                    <ul class="pagination">

                        {% if previous is defined %}
                            <li>
                                <a rel="prev" href="{{ path(route, query|merge({(pageParameterName): previous})) }}">&laquo;&nbsp;{{ 'label_previous'|trans }}</a>
                            </li>
                        {% else %}
                            <li class="disabled">
                                <span>&laquo;&nbsp;{{ 'label_previous'|trans }}</span>
                            </li>
                        {% endif %}

                        {% if startPage > 1 %}
                            <li>
                                <a href="{{ path(route, query|merge({(pageParameterName): 1})) }}">1</a>
                            </li>
                            {% if startPage == 3 %}
                                <li>
                                    <a href="{{ path(route, query|merge({(pageParameterName): 2})) }}">2</a>
                                </li>
                            {% elseif startPage != 2 %}
                                <li class="disabled">
                                    <span>&hellip;</span>
                                </li>
                            {% endif %}
                        {% endif %}

                        {% for page in range(startPage, endPage) %}
                            {% if page != current %}
                                <li>
                                    <a href="{{ path(route, query|merge({(pageParameterName): page})) }}">{{ page }}</a>
                                </li>
                            {% else %}
                                <li class="active">
                                    <span>{{ page }}</span>
                                </li>
                            {% endif %}

                        {% endfor %}

                        {% if pageCount > endPage %}
                            {% if pageCount > (endPage + 1) %}
                                {% if pageCount > (endPage + 2) %}
                                    <li class="disabled">
                                        <span>&hellip;</span>
                                    </li>
                                {% else %}
                                    <li>
                                        <a href="{{ path(route, query|merge({(pageParameterName): (pageCount - 1)})) }}">{{ pageCount -1 }}</a>
                                    </li>
                                {% endif %}
                            {% endif %}
                            <li>
                                <a href="{{ path(route, query|merge({(pageParameterName): pageCount})) }}">{{ pageCount }}</a>
                            </li>
                        {% endif %}

                        {% if next is defined %}
                            <li>
                                <a rel="next" href="{{ path(route, query|merge({(pageParameterName): next})) }}">{{ 'label_next'|trans }}&nbsp;&raquo;</a>
                            </li>
                        {% else %}
                            <li class="disabled">
                                <span>{{ 'label_next'|trans }}&nbsp;&raquo;</span>
                            </li>
                        {% endif %}
                    </ul>
                {% endif %}
            </ul>
        </div>
    </div>

{% endblock %}

